function repairGenerateReport() {
    // Obtiene los valores seleccionados por el usuario
    var startDate = $('#StartDate1').val();
    var endDate = $('#EndDate1').val();
    var status = $('#status').val();

    // Datos de ejemplo de garantías (puedes ajustarlos según tus necesidades)
    var repairs = [
        { date: '2023-11-01', number: '1023', customer: "Jamie Dorito", equipment: "Deck Parts", time: " 3 hrs ",costParts:"$50.00",laborCost:"$100.00",totalCost:"$150.00"},
        { date: '2023-11-23', number: '1023', customer: "Jamie Dorito", equipment: "Deck Parts", time: " 3 hrs ",costParts:"$50.00",laborCost:"$100.00",totalCost:"$150.00"},
        { date: '2023-11-23', number: '1023', customer: "Jamie Dorito", equipment: "Deck Parts", time: " 3 hrs ",costParts:"$50.00",laborCost:"$100.00",totalCost:"$150.00"},
        { date: '2023-11-14', number: '1023', customer: "Jamie Dorito", equipment: "Deck Parts", time: " 3 hrs ",costParts:"$50.00",laborCost:"$100.00",totalCost:"$150.00"},
        { date: '2023-11-08', number: '1023', customer: "Jamie Dorito", equipment: "Deck Parts", time: " 3 hrs ",costParts:"$50.00",laborCost:"$100.00",totalCost:"$150.00"},
        { date: '2023-11-05', number: '1023', customer: "Jamie Dorito", equipment: "Deck Parts", time: " 3 hrs ",costParts:"$50.00",laborCost:"$100.00",totalCost:"$150.00"},

        // Agrega más garantías según sea necesario
    ];



      // Crear la estructura HTML para el informe
      var htmlContent = `
    <div class="report-container">
          
              <p>Emmas Small Engines</p>
              <h3>Repair Report</h3>
              <hr />
              <p>Date generated: ${getCurrentDate()}</p>
              <p>Generated by: Emma</p>
              <p>Report date range: ${startDate} - ${endDate}</p>
              <p>Status: ${status}</p>
              <p>Role: Admin</p>
              <table border="1">
                  <thead class="table-light">
                      <tr>
                          <th>Date</th>
                          <th>Number</th>
                          <th>Customer</th>
                          <th>Equipment</th>
                          <th>Time Spent</th>
                          <th>Cost of Parts</th>
                          <th>Labor Cost</th>
                          <th>Total Cost</th>
                      </tr>
                  </thead>
                  <tbody>`;

        // Agregar filas de datos
        repairs.forEach(repairs => {
            htmlContent += `
                  <tr>
                      <td>${repairs.date}</td>
                      <td>${repairs.number}</td>
                      <td>${repairs.customer}</td>
                      <td>${repairs.equipment}</td>
                      <td>${repairs.time}</td>
                      <td>${repairs.costParts}</td>
                      <td>${repairs.laborCost}</td>
                      <td>${repairs.totalCost}</td>
                  </tr>`;
  });

  // Cerrar la estructura HTML de la tabla
  htmlContent += `
                    </tbody>
                </table>
            <div class="totals">          
                <p>Total Cost of Parts: $250.00</p>
                <p>Total Labor Cost: $500.00</p>
                <p>Total Cost: $750.00</p>
           <div>
            
        </div>`;

    // Obtener el contenedor del informe
    var reportContainer = document.getElementById('RepairReportContainer');

    // Asignar el contenido HTML al contenedor
    reportContainer.innerHTML = htmlContent;

    // Mostrar el contenedor cambiando el estilo display a 'flex'
    reportContainer.style.display = 'block';
}






















// anterior reporte

$(document).ready(function () {

    var table = $('#repairReportTable').DataTable({
        "data": testdata2.data,
        select: "single",
        "columns": [
            {
                "className": 'details-control',
                "orderable": false,
                "data": null,
                "defaultContent": '',
                "render": function () {
                    return '<i class="fa fa-plus-square" aria-hidden="true"></i>';
                },
                width: "15px"
            },
            { "data": "date" },
            { "data": "number" },
            { "data": "customer" },
            { "data": "equipment" },
            { "data": "time" },
            { "data": "part_cost" },
            { "data": "labor_cost" },
            { "data": "total_cost" }
           
        ],
        "order": [[1, 'asc']]
    });

    // Add event listener for opening and closing details
    $('#repairReportTable tbody').on('click', 'td.details-control', function () {
        var tr = $(this).closest('tr');
        var tdi = tr.find("i.fa");
        var row = table.row(tr);

        if (row.child.isShown()) {
            // This row is already open - close it
            row.child.hide();
            tr.removeClass('shown');
            tdi.first().removeClass('fa-minus-square');
            tdi.first().addClass('fa-plus-square');
        }
        else {
            // Open this row
            row.child(format(row.data())).show();
            tr.addClass('shown');
            tdi.first().removeClass('fa-plus-square');
            tdi.first().addClass('fa-minus-square');
        }
    });

    table.on("user-select", function (e, dt, type, cell, originalEvent) {
        if ($(cell.node()).hasClass("details-control")) {
            e.preventDefault();
        }
    });
});

function format(d) {

    // `d` is the original data object for the row
    return '<table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;">' +
        '<tr>' +
        '<td>Status:</td>' +
        '<td>' + d.repair_status + '</td>' +
        '</tr>' +
        '<tr>' +
        '<td>Technician:</td>' +
        '<td>' + d.technician + '</td>' +
        '</tr>' +
        '</table>';
}

var testdata2 = {
    "data": [
        {
            "date": "2023-11-01",
            "number": "1023",
            "customer": "Jamie Dorito",
            "equipment": "Deck Parts",
            "time": "3 hrs",
            "part_cost": "$50.00",
            "labor_cost": "$100.00",
            "total_cost": "$150.00",
            "repair_status": "Finished",
            "technician": "Julian Martinez"
        },
        {
            "date": "2023-11-01",
            "number": "1023",
            "customer": "Jamie Dorito",
            "equipment": "Deck Parts",
            "time": "3 hrs",
            "part_cost": "$50.00",
            "labor_cost": "$100.00",
            "total_cost": "$150.00",
            "repair_status": "Finished",
            "technician": "Julian Martinez"
        },
        {
            "date": "2023-11-01",
            "number": "1023",
            "customer": "Jamie Dorito",
            "equipment": "Deck Parts",
            "time": "3 hrs",
            "part_cost": "$50.00",
            "labor_cost": "$100.00",
            "total_cost": "$150.00",
            "repair_status": "Finished",
            "technician": "Julian Martinez"
        },
        {
            "date": "2023-11-01",
            "number": "1023",
            "customer": "Jamie Dorito",
            "equipment": "Deck Parts",
            "time": "3 hrs",
            "part_cost": "$50.00",
            "labor_cost": "$100.00",
            "total_cost": "$150.00",
            "repair_status": "Finished",
            "technician": "Julian Martinez"
        },
        {
            "date": "2023-11-01",
            "number": "1023",
            "customer": "Jamie Dorito",
            "equipment": "Deck Parts",
            "time": "3 hrs",
            "part_cost": "$50.00",
            "labor_cost": "$100.00",
            "total_cost": "$150.00",
            "repair_status": "Finished",
            "technician": "Julian Martinez"
        },
        {
            "date": "2023-11-01",
            "number": "1023",
            "customer": "Jamie Dorito",
            "equipment": "Deck Parts",
            "time": "3 hrs",
            "part_cost": "$50.00",
            "labor_cost": "$100.00",
            "total_cost": "$150.00",
            "repair_status": "Finished",
            "technician": "Julian Martinez"
        },
        {
            "date": "2023-11-01",
            "number": "1023",
            "customer": "Jamie Dorito",
            "equipment": "Deck Parts",
            "time": "3 hrs",
            "part_cost": "$50.00",
            "labor_cost": "$100.00",
            "total_cost": "$150.00",
            "repair_status": "Finished",
            "technician": "Julian Martinez"
        },
        {
            "date": "2023-11-01",
            "number": "1023",
            "customer": "Jamie Dorito",
            "equipment": "Deck Parts",
            "time": "3 hrs",
            "part_cost": "$50.00",
            "labor_cost": "$100.00",
            "total_cost": "$150.00",
            "repair_status": "Finished",
            "technician": "Julian Martinez"
        },
        {"date": "2023-11-01",
        "number": "1023",
        "customer": "Jamie Dorito",
        "equipment": "Deck Parts",
        "time": "3 hrs",
        "part_cost": "$50.00",
        "labor_cost": "$100.00",
        "total_cost": "$150.00",
        "repair_status": "Finished",
        "technician": "Julian Martinez"
        },
        {
            "date": "2023-11-01",
            "number": "1023",
            "customer": "Jamie Dorito",
            "equipment": "Deck Parts",
            "time": "3 hrs",
            "part_cost": "$50.00",
            "labor_cost": "$100.00",
            "total_cost": "$150.00",
            "repair_status": "Finished",
            "technician": "Julian Martinez"
        },
        {
            "date": "2023-11-01",
            "number": "1023",
            "customer": "Jamie Dorito",
            "equipment": "Deck Parts",
            "time": "3 hrs",
            "part_cost": "$50.00",
            "labor_cost": "$100.00",
            "total_cost": "$150.00",
            "repair_status": "Finished",
            "technician": "Julian Martinez"
        },
        {
            "date": "2023-11-01",
            "number": "1023",
            "customer": "Jamie Dorito",
            "equipment": "Deck Parts",
            "time": "3 hrs",
            "part_cost": "$50.00",
            "labor_cost": "$100.00",
            "total_cost": "$150.00",
            "repair_status": "Finished",
            "technician": "Julian Martinez"
        },
        {
            "date": "2023-11-01",
            "number": "1023",
            "customer": "Jamie Dorito",
            "equipment": "Deck Parts",
            "time": "3 hrs",
            "part_cost": "$50.00",
            "labor_cost": "$100.00",
            "total_cost": "$150.00",
            "repair_status": "Finished",
            "technician": "Julian Martinez"
        },
        {
            "date": "2023-11-01",
            "number": "1023",
            "customer": "Jamie Dorito",
            "equipment": "Deck Parts",
            "time": "3 hrs",
            "part_cost": "$50.00",
            "labor_cost": "$100.00",
            "total_cost": "$150.00",
            "repair_status": "Finished",
            "technician": "Julian Martinez"
        },
        {
            "date": "2023-11-01",
            "number": "1023",
            "customer": "Jamie Dorito",
            "equipment": "Deck Parts",
            "time": "3 hrs",
            "part_cost": "$50.00",
            "labor_cost": "$100.00",
            "total_cost": "$150.00",
            "repair_status": "Finished",
            "technician": "Julian Martinez"
        }
    ]
};